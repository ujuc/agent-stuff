# 스킬 패턴 가이드

> 5가지 스킬 구조 패턴과 선택 기준.

---

## 패턴 선택 가이드

| 패턴 | 적합한 상황 | 사용자 상호작용 |
|------|------------|----------------|
| 선형 워크플로우 | 정해진 순서대로 실행하는 작업 | 낮음 |
| 인터뷰 기반 | 요구사항이 유동적이거나 사용자 맥락이 필요한 작업 | 높음 |
| 도구 오케스트레이션 | 여러 도구/API를 조합하는 작업 | 중간 |
| 템플릿 채우기 | 정형화된 출력물을 생성하는 작업 | 낮음 |
| 검증·리뷰 | 기존 산출물의 품질을 점검하는 작업 | 중간 |

---

## 1. 선형 워크플로우

순서가 정해진 단계를 차례로 실행한다.

### 언제 사용하는가

- 실행 순서가 명확하고 분기가 적은 작업
- 각 단계의 입력/출력이 다음 단계로 전달되는 파이프라인
- 예: 빌드 → 테스트 → 배포, 파일 생성 → 검증 → 커밋

### 구조 예시

```markdown
## 1단계: 환경 확인
(의존성 확인, 사전 조건 점검)

## 2단계: 코드 생성
(핵심 작업 수행)

## 3단계: 검증
(결과 확인, 테스트 실행)

## 4단계: 정리
(커밋, 보고)
```

### 장단점

- 장점: 예측 가능, 디버깅 용이, 재현성 높음
- 단점: 유연성 부족, 분기 처리 어려움

---

## 2. 인터뷰 기반

사용자와 대화하여 요구사항을 수집한 후 실행한다.

### 언제 사용하는가

- 사용자의 맥락/선호가 결과에 크게 영향을 미치는 작업
- 요구사항이 모호하거나 여러 선택지가 존재하는 작업
- 예: 프로젝트 설정, 문서 생성, 설계 결정

### 구조 예시

```markdown
## 1단계: 탐지
(자동으로 파악 가능한 정보 수집)

## 2단계: 인터뷰
(AskUserQuestion으로 부족한 정보 수집)
- 질문 1: ...
- 질문 2: ...

## 3단계: 생성
(수집한 정보 기반으로 실행)

## 4단계: 검증
(결과 확인, 사용자 승인)
```

### 장단점

- 장점: 맞춤형 결과, 사용자 만족도 높음
- 단점: 실행 시간 길어짐, 질문이 과하면 피로감

---

## 3. 도구 오케스트레이션

여러 도구(내장 도구, MCP 서버, 외부 CLI)를 조합하여 복합 작업을 수행한다.

### 언제 사용하는가

- 단일 도구로는 해결할 수 없는 복합 작업
- 여러 시스템 간 데이터를 연동하는 작업
- 예: API 호출 → 데이터 변환 → 파일 생성, Git + 이슈 트래커 연동

### 구조 예시

```markdown
## 사전 조건
(필요 도구/서버 확인, 연결 상태 점검)

## 워크플로우
1. [도구 A]에서 데이터 조회
2. 데이터 변환/가공
3. [도구 B]에 결과 전달
4. 결과 확인

## 에러 처리
| 오류 | 원인 | 해결 |
|------|------|------|
| Connection refused | 서버 미실행 | ... |
```

### 장단점

- 장점: 강력한 자동화, 복합 작업 처리
- 단점: 의존성 많음, 에러 처리 복잡, 디버깅 어려움

---

## 4. 템플릿 채우기

정형화된 틀에 변수를 채워 산출물을 생성한다.

### 언제 사용하는가

- 출력 형식이 일정하고 반복적인 작업
- 보일러플레이트 생성
- 예: PR 템플릿, 설정 파일, 문서 골격

### 구조 예시

```markdown
## 입력 변수
- `$PROJECT_NAME`: 프로젝트 이름
- `$AUTHOR`: 작성자
- `$TECH_STACK`: 기술 스택

## 템플릿

\```
# $PROJECT_NAME

Author: $AUTHOR
Stack: $TECH_STACK
\```

## 생성 규칙
(변수 치환 규칙, 조건부 섹션 포함/제외 기준)
```

### 장단점

- 장점: 일관된 출력, 빠른 실행, 유지보수 용이
- 단점: 유연성 제한, 복잡한 로직 표현 어려움

---

## 5. 검증·리뷰

기존 산출물을 기준에 따라 점검하고 개선점을 제시한다.

### 언제 사용하는가

- 품질 게이트 역할이 필요한 작업
- 체크리스트 기반 검토
- 예: 코드 리뷰, 문서 검증, 설정 감사

### 구조 예시

```markdown
## 검증 대상
(대상 파일/디렉토리 식별)

## 검증 기준
### 기준 1: 구조 검사
- [ ] 항목 A
- [ ] 항목 B

### 기준 2: 내용 검사
- [ ] 항목 C

## 결과 보고
(통과/실패 요약, 수정 제안)

## 수정 후 재검증
(실패 항목 수정 후 해당 기준만 재실행)
```

### 장단점

- 장점: 품질 보장, 재현 가능한 검증, 자동화 용이
- 단점: 기준 작성에 시간 소요, 과도한 검증은 생산성 저하

---

## 패턴 조합

복잡한 스킬은 여러 패턴을 조합할 수 있다:

- **인터뷰 + 선형**: 요구사항 수집 후 순차 실행 (예: `generate-claude-md`)
- **선형 + 검증**: 생성 후 품질 검증 (예: `generate-skills`)
- **도구 오케스트레이션 + 검증**: 자동화 실행 후 결과 검증

조합 시 각 패턴의 경계를 단계로 명확히 구분한다.
